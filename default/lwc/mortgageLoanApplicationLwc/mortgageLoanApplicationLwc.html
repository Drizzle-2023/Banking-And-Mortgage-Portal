<!-- sldsValidatorIgnore -->
<!-- Adding for Testing -->
<template>
    <div class="button3">
        <!-- <lightning-button class="slds-var-m-right_medium  button1" label="Next1" title="Next1"></lightning-button>
        <lightning-button class="slds-var-m-right_medium  button2" label="Next2" title="Next2"></lightning-button> -->

        <div if:true={isLoaded}>
            <lightning-spinner alternative-text="Loading" variant="brand" size="large"></lightning-spinner>
        </div>
        <!--  -->
        <div if:false={isLoaded} class="slds-box box-shadow tab-section">
            <div class="slds-box_border">
                <div if:true={showFormTypeSelector}>
                    <section style="background: rgba(62, 59, 59, 0.559);" if:true={isMortgageOption} role="dialog"
                        tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                        aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                        <div class="slds-modal__container">
                            <header class="slds-modal__header">
                                <lightning-button-icon class="slds-modal__close slds-button_icon-inverse"
                                    icon-name="utility:close" alternative-text="close" title="Close"
                                    onclick={hideModalBox}></lightning-button-icon>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Select
                                    Mortgage
                                    Type
                                </h2>
                            </header>
                            <div class="slds-modal__content slds-var-p-around_medium" id="modal-content-id-1">
                                <div class="slds-var-m-around_large">
                                    <lightning-combobox name="progress" label="Select a Mortgage Type" value={value}
                                        placeholder="Select Progress" options={mortgageOptions}
                                        onchange={handleMortgageLoanType} required>
                                    </lightning-combobox>
                                </div>
                                <div class="slds-var-m-around_medium slds-text-align_center">
                                    <lightning-button label="Submit" variant="brand" onclick={setMortgageType}>
                                    </lightning-button>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <div>
                    <div class="page-section-box slds-var-m-around_large">
                        <div
                            class="slds-text-heading_medium slds-text-align_center slds-m-top_small slds-m-bottom_small slds-text-color_default">
                            <h1 if:true={MortgageLoanProgram}>{MortgageLoanProgram.Name} Application Form</h1>
                        </div>
                    </div>
                    <div class="cust-progress-bar slds-var-m-around_large">
                        <lightning-progress-indicator current-step={ResidentialLoanApplication.Status} type="path"
                            variant="brand">
                            <template for:each={statusOptions} for:item="step">
                                <lightning-progress-step label={step.label} value={step.value}
                                    key={step.label}></lightning-progress-step>
                            </template>
                        </lightning-progress-indicator>
                    </div>
                    <div class="main-container slds-var-m-around_large">
                        <div class="slds-align_absolute-center slds-var-m-top_large slds-var-m-bottom_large"
                            style="display: block; text-align: center; color: rgb(25,17,105);width:75%;">
                            <div>
                                <p if:true={MortgageLoanProgram.Applicant_Instruction__c}>
                                    {MortgageLoanProgram.Applicant_Instruction__c}
                                </p>
                            </div>
                        </div>

                        <div>
                            <lightning-tabset class="tab-active" variant="vertical" active-tab-value={currentTab}>
                                <lightning-tab label="Pre App">
                                </lightning-tab>

                                <lightning-tab label="1. Instructions" value="0">
                                    <div class="slds-text-color_weak slds-text-align_center text-success
                                        slds-text-heading_small">
                                        Instructions
                                    </div>
                                    <div class="tab-container">
                                        <div class="slds-align_absolute-center"
                                            style="display: block; text-align: center; padding: 2%;">
                                            <div>
                                                <p style="text-align: justify;">
                                                    {MortgageLoanProgram.Loan_Instructions__c}
                                                </p>
                                            </div>
                                            <br>
                                            <lightning-input type="checkbox" label="I have read the above instructions."
                                                name="read-me-input1" checked={isTermChecked}
                                                onchange={handelTermsAndCondition}
                                                value={isTermChecked}></lightning-input>
                                        </div>
                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" class="slds-var-m-right_medium"
                                                label="Next" title="Next"
                                                onclick={showApplicationQuestionTab}></lightning-button>
                                            <lightning-button label="Cancel" title="Cancel"
                                                onclick={cancelForm}></lightning-button>
                                        </div>
                                    </div>
                                </lightning-tab>
                                <lightning-tab value="1" label="2. Loan/Property Information">
                                    <div class="slds-text-color_weak slds-text-align_center slds-text-heading_small">
                                        Loan/Property Information
                                    </div>
                                    <div class="tab-container">
                                        <article
                                            class="slds-grid slds-align_absolute-center slds-var-m-around_small applicationSummary">
                                            <div class="slds-col slds-text-align_center">
                                                <p class="slds-text-heading_label slds-truncate"
                                                    style="font-weight: bold;" title="Monthly Income">
                                                    Monthly Income</p>
                                                <p class="slds-text-body_regular slds-truncate">
                                                    <lightning-formatted-number
                                                        value={ResidentialLoanApplication.TotalMonthlyIncome__c}
                                                        format-style="currency"
                                                        currency-code="USD"></lightning-formatted-number>
                                                </p>
                                            </div>
                                            <div class="slds-col slds-text-align_center">
                                                <p class="slds-text-heading_label slds-truncate" title="Monthly Expence"
                                                    style="font-weight: bold;">
                                                    Monthly Expense</p>
                                                <p class="slds-text-body_regular slds-truncate">
                                                    <lightning-formatted-number
                                                        value={ResidentialLoanApplication.TotalMonthlyExpense__c}
                                                        format-style="currency"
                                                        currency-code="USD"></lightning-formatted-number>
                                                </p>
                                            </div>
                                            <div class="slds-col slds-text-align_center">
                                                <p class="slds-text-heading_label slds-truncate"
                                                    title="Debt To Income Ratio" style="font-weight: bold;">
                                                    Debt To Income Ratio</p>
                                                <p class="slds-text-body_regular slds-truncate">
                                                    <lightning-formatted-number
                                                        value={ResidentialLoanApplication.Debt_To_Income_Ratio__c}
                                                        format-style="percent"
                                                        maximum-fraction-digits="2"></lightning-formatted-number>
                                                </p>
                                            </div>
                                        </article>
                                        <div class="slds-section slds-is-open">
                                            <h3 class="slds-section__title slds-theme_shade">
                                                <span class="slds-truncate slds-p-horizontal_small"
                                                    title="Loan Information">Loan Information</span>
                                            </h3>
                                            <div aria-hidden="false" class="slds-section__content">

                                                <lightning-combobox class="propertyLoanInfo" label="Purpose of Loan"
                                                    value={ResidentialLoanApplication.LoanPurpose}
                                                    data-field-api-name="LoanPurpose"
                                                    options={purposeOfLoan}></lightning-combobox>

                                                <lightning-combobox class="MortgageProgramType"
                                                    data-field-api-name="MortgageProgramType"
                                                    label="Mortgage Program Type"
                                                    value={ResidentialLoanApplication.MortgageProgramType}
                                                    options={MortgageTypes}></lightning-combobox>

                                                <lightning-combobox class="borrowerForm"
                                                    data-field-api-name="PropertyUseType" label="Occupancy Type"
                                                    value={LoanApplicationProperty.PropertyUseType}
                                                    options={OccupancyType}></lightning-combobox>

                                                <lightning-combobox class="borrowerForm"
                                                    data-field-api-name="Property_Type__c" label="Property Type"
                                                    value={LoanApplicationProperty.Property_Type__c}
                                                    options={PropertyType}></lightning-combobox>

                                                <lightning-input class="borrowerForm"
                                                    data-field-api-name="RequestedLoanAmount"
                                                    label="Desired Loan Amount" type="number" formatter="currency"
                                                    required value={LoanApplicationProperty.RequestedLoanAmount}>
                                                </lightning-input>

                                                <lightning-input class="borrowerForm"
                                                    data-field-api-name="Downpayment_Amount__c"
                                                    label="Down Payment Amount" type="number" formatter="currency"
                                                    required value={LoanApplicationProperty.Downpayment_Amount__c}>
                                                </lightning-input>
                                            </div>
                                        </div>
                                        <div if:true={isMortageRefinance}>
                                            <div class="slds-section slds-is-open">
                                                <h3 class="slds-section__title slds-theme_shade">
                                                    <span class="slds-truncate slds-p-horizontal_small"
                                                        title="Loan Information">Refinance/Home Equity Details</span>
                                                </h3>
                                                <div aria-hidden="false" class="slds-section__content">
                                                    <lightning-input class="propertyLoanInfo" type="text"
                                                        data-field-api-name="Year_Acquired__c" label="Year Acquired"
                                                        value={ResidentialLoanApplication.Year_Acquired__c}></lightning-input>

                                                    <lightning-input class="propertyLoanInfo" type="number"
                                                        data-field-api-name="LotOriginalCost" formatter="currency"
                                                        label="Original Cost"
                                                        value={ResidentialLoanApplication.LotOriginalCost}></lightning-input>

                                                    <lightning-input class="propertyLoanInfo"
                                                        data-field-api-name="Amount_Existing_Liens__c" type="number"
                                                        formatter="currency"
                                                        label="Amount Existing Liens / Payoff Amount"
                                                        value={ResidentialLoanApplication.Amount_Existing_Liens__c}></lightning-input>

                                                    <lightning-input class="propertyLoanInfo" type="text"
                                                        label="Purpose of Refinance"
                                                        data-field-api-name="Purpose_of_Refinance__c"
                                                        value={ResidentialLoanApplication.Purpose_of_Refinance__c}></lightning-input>

                                                    <lightning-input class="propertyLoanInfo"
                                                        data-field-api-name="ImprovementCost" type="number"
                                                        formatter="currency" label="Describe Improvements Cost"
                                                        value={ResidentialLoanApplication.ImprovementCost}></lightning-input>

                                                    <lightning-input class="propertyLoanInfo"
                                                        data-field-api-name="Title_Held_In_Name__c" type="text"
                                                        label="The Title Will Be Held In What Name(s)"
                                                        value={ResidentialLoanApplication.Title_Held_In_Name__c}></lightning-input>

                                                    <lightning-combobox
                                                        data-field-api-name="Manner_In_Which_Title_Held__c"
                                                        label="The Manner In Which Title Will Be Held"
                                                        class="propertyLoanInfo"
                                                        value={ResidentialLoanApplication.Manner_In_Which_Title_Held__c}
                                                        options={Manner_In_Which_Title_Held}></lightning-combobox>

                                                    <lightning-input class="propertyLoanInfo"
                                                        data-field-api-name="Down_Payment_Source__c" type="text"
                                                        label="Source Of Dwon Payment"
                                                        value={ResidentialLoanApplication.Down_Payment_Source__c}></lightning-input>

                                                    <lightning-combobox data-field-api-name="Estate_Held_In__c"
                                                        label="Estate Will Be Held In" class="propertyLoanInfo"
                                                        value={ResidentialLoanApplication.Estate_Held_In__c}
                                                        options={Estate_Held_In}></lightning-combobox>

                                                </div>
                                            </div>

                                        </div>
                                        <div class="slds-section slds-is-open">
                                            <h3 class="slds-section__title slds-theme_shade">
                                                <span class="slds-truncate slds-p-horizontal_small"
                                                    title="Property Information">Property Information</span>
                                            </h3>
                                            <div aria-hidden="false" class="slds-section__content">
                                                <lightning-input class="borrowerForm"
                                                    data-field-api-name="Legal_Description__c" label="Legal Description"
                                                    type="text" value={LoanApplicationProperty.Legal_Description__c}>
                                                </lightning-input>
                                                <lightning-input class="borrowerForm"
                                                    data-field-api-name="Year_Built__c" label="Year Built" type="number"
                                                    value={LoanApplicationProperty.Year_Built__c}>
                                                </lightning-input>
                                                <lightning-input class="borrowerForm"
                                                    data-field-api-name="Number_of_Units__c" label="Number of Units"
                                                    type="number" value={LoanApplicationProperty.Number_of_Units__c}>
                                                </lightning-input>

                                                <lightning-input-address address-label="Property Address"
                                                    street-label="Street" city-label="City" country-label="Country"
                                                    province-label="State or Province" postal-code-label="PostalCode"
                                                    street={LoanApplicationProperty.PropertyStreet}
                                                    city={LoanApplicationProperty.PropertyCity}
                                                    country={LoanApplicationProperty.PropertyCountry}
                                                    province={LoanApplicationProperty.PropertyState}
                                                    postal-code={LoanApplicationProperty.PropertyPostalCode}
                                                    onchange={handelPropertyAddress}></lightning-input-address>
                                            </div>
                                        </div>
                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button class="slds-var-m-right_small" variant="brand"
                                                label="Save and Next" title="Next"
                                                onclick={saveLoanInformation}></lightning-button>

                                            <lightning-button label="Cancel" title="Cancel"
                                                onclick={cancelForm}></lightning-button>
                                        </div>
                                    </div>
                                </lightning-tab>

                                <lightning-tab value="2" label="3. Loan Applicant(s)">

                                    <div class="slds-text-color_weak slds-text-align_center slds-text-heading_small">
                                        Loan Applicant Information
                                    </div>
                                    <div class="tab-container">
                                        <lightning-card variant="Narrow" title="Loan Applicant Information"
                                            icon-name="action:add_contact">
                                            <lightning-button label="New" slot="actions" icon-name="utility:add"
                                                icon-position="left" onclick={showNewBorrowerForm}>
                                            </lightning-button>

                                            <div class="slds-p-horizontal_small">
                                                <lightning-datatable key-field="id" hide-checkbox-column="true"
                                                    onrowaction={editBorrowerForm} data={LoanApplicant}
                                                    columns={columns}>
                                                </lightning-datatable>
                                            </div>
                                        </lightning-card>
                                    </div>
                                </lightning-tab>

                                <lightning-tab value="" label="Full App">
                                </lightning-tab>

                                <lightning-tab value="3" onactive={tabActive} data-action="3" label="1. Assets">

                                    <div class="slds-text-color_weak slds-text-align_center slds-text-heading_small">
                                        Assets
                                    </div>
                                    <div class="tab-container">
                                        <lightning-card variant="Narrow" title="Assets" icon-name="action:description">

                                            <lightning-button label="New" icon-name="utility:add" icon-position="left"
                                                onclick={showNewAssetsForm}>
                                            </lightning-button>

                                            <p class="slds-p-horizontal_small"></p>
                                            <lightning-datatable key-field="id" data={Assets} hide-checkbox-column
                                                columns={Assetscolumns} onrowaction={editAssetForm}>
                                            </lightning-datatable>
                                            </p>
                                        </lightning-card>
                                    </div>
                                </lightning-tab>

                                <lightning-tab value="4" label="2. Liabilities" data-action="4" onactive={tabActive}>

                                    <div class="slds-text-color_weak slds-text-align_center slds-text-heading_small">
                                        Liabilities
                                    </div>
                                    <div class="tab-container">
                                        <lightning-card variant="Narrow" title="Liabilities" icon-name="action:update">

                                            <lightning-button label="New" icon-name="utility:add" icon-position="left"
                                                onclick={showNewLiabilitiesForm}></lightning-button>
                                            <p class="slds-p-horizontal_small"></p>
                                            <lightning-datatable key-field="id" data={Liabilities} hide-checkbox-column
                                                columns={Liabilitiescolumns} onrowaction={editLiabilityForm}>
                                            </lightning-datatable>
                                            </p>
                                        </lightning-card>
                                    </div>
                                </lightning-tab>

                                <lightning-tab value="5" label="3. Required Document Uploads">

                                    <div class="slds-text-color_weak slds-text-align_center slds-text-heading_small">
                                        Required Document Uploads
                                    </div>
                                    <div class="tab-container slds-border_top slds-var-m-around_small">
                                        <div if:true={recordIdAndLoanId}>
                                            <c-required-file-upload record-id={ResidentialLoanApplication.Id}
                                                child-lookup-relationship-name=""
                                                storage-object-name="Required_Application_Document__c"
                                                storage-parent-lookup="Residential_Loan_Application__c"
                                                storage-file-type-lookup="File_Type__c"
                                                file-type-ids={requiredDocumentIds}>
                                            </c-required-file-upload>
                                        </div>
                                        <div if:false={recordIdAndLoanId}>
                                            <div class="slds-text-color_weak slds-text-align_center 
                                                    slds-text-heading_small">
                                                Please fill the previous sections of the form</div>
                                        </div>
                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" label="Next" title="Next"
                                                onclick={setCertificationTab}></lightning-button>
                                        </div>
                                    </div>
                                </lightning-tab>

                                <lightning-tab value="6" label="4. Certifications And Authorizations">

                                    <div class="slds-text-color_weak slds-text-align_center slds-text-heading_small">
                                        Certifications And Authorizations
                                    </div>
                                    <div class="tab-container">
                                        <lightning-card variant="Narrow" title="Certifications And Authorizations"
                                            icon-name="action:add_contact">

                                            <p class="slds-p-horizontal_small"></p>

                                            <lightning-datatable key-field="id" hide-checkbox-column="true"
                                                onrowaction={editCertificationForm} data={LoanApplicant}
                                                columns={columns}>
                                            </lightning-datatable>
                                            </p>
                                        </lightning-card>
                                    </div>
                                    <div class="slds-align_absolute-center">
                                        <lightning-button variant="brand" label="Submit Full App"
                                            title="FullAppComplete" value="PersonalInfo" onclick={submitFullApp}>
                                        </lightning-button>
                                    </div>
                                </lightning-tab>
                            </lightning-tabset>
                        </div>
                    </div>
                </div>
            </div>

            <div if:true={showBorrowerForm}>
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                    aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">

                        <header class="slds-modal__header">
                            <lightning-button-icon class="slds-modal__close slds-button_icon-inverse"
                                icon-name="utility:close" alternative-text="close" title="Close"
                                onclick={hideBorrowerForm}></lightning-button-icon>

                            <div if:true={NewLoanApplicant.Name}>
                                <h2 class="slds-text-heading_medium slds-hyphenate"> {NewLoanApplicant.Name} Information
                                </h2>

                            </div>
                            <div if:false={NewLoanApplicant.Name}>
                                <h2 class="slds-text-heading_medium slds-hyphenate"> Borrower Personal Information
                                </h2>
                            </div>
                        </header>

                        <div class="slds-modal__content slds-p-around_medium">
                            <lightning-tabset active-tab-value={PersonalInfoCurrentTab} variant="vertical">

                                <lightning-tab label="Personal Information" value="0">
                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Personal Information
                                    </div>
                                    <div class="tab-container">

                                        <lightning-input label="First Name" data-field-api-name="First_Name__c"
                                            value={NewLoanApplicant.First_Name__c} required="true" type="text"
                                            class="PersonalInfo"></lightning-input>

                                        <lightning-input label="Last Name" data-field-api-name="Last_Name__c"
                                            value={NewLoanApplicant.Last_Name__c} required="true" type="text"
                                            class="PersonalInfo"></lightning-input>

                                        <lightning-input label="Social Security Number" data-field-api-name="SSN__c"
                                            value={NewLoanApplicant.SSN__c} required="true" type="text"
                                            class="PersonalInfo"></lightning-input>

                                        <lightning-input label="No. of Dependents" data-field-api-name="DependentCount"
                                            value={NewLoanApplicant.DependentCount} required="true" type="number"
                                            class="PersonalInfo"></lightning-input>

                                        <lightning-combobox class="PersonalInfo" label="Marital Status"
                                            data-field-api-name="MaritalStatus" options={maritalStatus}
                                            value={NewLoanApplicant.MaritalStatus}>
                                        </lightning-combobox>

                                        <lightning-input label="Home Phone" data-action="Phone__c"
                                            value={NewLoanApplicant.Phone__c} required="true" type="tel"
                                            class="PersonalInfo"></lightning-input>

                                        <lightning-input label="Mobile Phone" data-field-api-name="Mobile__c"
                                            value={NewLoanApplicant.Mobile__c} required="true" type="tel"
                                            class="PersonalInfo"></lightning-input>

                                        <lightning-input label="Email" data-field-api-name="Email__c"
                                            value={NewLoanApplicant.Email__c} required="true" type="email"
                                            class="PersonalInfo"></lightning-input>

                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" label="Save and Next" title="Next"
                                                data-action="PersonalInfo" onclick={saveLoanApplicantInfo}>
                                            </lightning-button>
                                        </div>
                                    </div>
                                </lightning-tab>
                                <lightning-tab label="Credit Approval" value="1">
                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Credit Approval
                                    </div>
                                    <div class="tab-container">
                                        <p style="text-align: justify;">
                                            I authorize EMS Financial Services to obtain a consumer credit report on me.
                                            EMS
                                            Financial Services will use the consumer credit report to “Determine Loan
                                            Options”, Upon request, EMS Financial Services will provide me with the name
                                            and
                                            address of the Consumer Reporting Agency contacted to supply the report. I
                                            understand that credit inquiries have the potential to impact my credit
                                            score.
                                        </p>
                                        <br></lightning-input>
                                        <div class="slds-grid">
                                            <lightning-input data-field-api-name="Approval_Accept__c" type="checkbox"
                                                label="I accept" data-checkbox="true" name="Iaccept"
                                                checked={NewLoanApplicant.Approval_Accept__c}
                                                class="certification"></lightning-input>
                                        </div>
                                        <br></lightning-input>
                                        <div class="slds-grid slds-gutters">
                                            <div class="slds-col">
                                                <span>
                                                    <lightning-input data-field-api-name="Approval_Name__c" label="Name"
                                                        value={NewLoanApplicant.Approval_Name__c} type="text"
                                                        class="certification"></lightning-input>
                                                </span>
                                            </div>
                                            <div class="slds-col">
                                                <span>
                                                    <lightning-input data-field-api-name="BirthDate__c"
                                                        label="Date of Birth" value={NewLoanApplicant.BirthDate__c}
                                                        type="date" class="certification"></lightning-input>
                                                </span>
                                            </div>
                                        </div>

                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" label="Save and Next" title="Next"
                                                data-action="CreditApproval"
                                                onclick={saveLoanApplicantInfo}></lightning-button>
                                        </div>
                                    </div>
                                </lightning-tab>
                                <lightning-tab label="Application Questions" value="2">

                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Application Questions</div>
                                    <div class="tab-container slds-var-m-around_small">
                                        <template for:each={DeclarationQuestions} for:item="ques">
                                            <div key={ques.Name}>
                                                {ques.Description}
                                                <div>
                                                    <div class="slds-clearfix" if:true={ques.Answer}>
                                                        <div class="slds-float--left slds-var-m-around_small">
                                                            <label for={ques.Loan_Declaration_Field}>Yes</label>
                                                            <br>
                                                            <input checked type="radio" id={ques.Loan_Declaration_Field}
                                                                name={ques.Loan_Declaration_Field} onchange={onGroup}
                                                                class="slds-radio applicantDeclaration">
                                                        </div>
                                                        <div class="slds-float--left slds-var-m-around_small">
                                                            <label for={ques.Loan_Declaration_Field}>No</label>
                                                            <br>
                                                            <input type="radio" id={ques.Loan_Declaration_Field}
                                                                name={ques.Loan_Declaration_Field} onchange={onGroup}
                                                                class="slds-radio">
                                                        </div>
                                                    </div>
                                                    <div class="slds-clearfix" if:false={ques.Answer}>
                                                        <div class="slds-float--left slds-var-m-around_small">
                                                            <label for={ques.Loan_Declaration_Field}>Yes</label>
                                                            <br>
                                                            <input type="radio" id={ques.Loan_Declaration_Field}
                                                                data-field-api-name={ques.Loan_Declaration_Field}
                                                                name={ques.Loan_Declaration_Field} onchange={onGroup}
                                                                class="slds-radio applicantDeclaration">
                                                        </div>
                                                        <div class=" slds-float--left slds-var-m-around_small">
                                                            <label for={ques.Loan_Declaration_Field}>No</label>
                                                            <br>
                                                            <input type="radio" id={ques.Loan_Declaration_Field}
                                                                data-field-api-name={ques.Loan_Declaration_Field}
                                                                name={ques.Loan_Declaration_Field} checked
                                                                onchange={onGroup} class="slds-radio">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </template>
                                        <div class="slds-align_absolute-center">
                                            <lightning-button variant="brand" label="Save and Next" title="Next"
                                                onclick={saveApplicantQuestions}></lightning-button>
                                        </div>
                                    </div>
                                </lightning-tab>
                                <lightning-tab label="Address Information" value="3">

                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Address Information
                                    </div>
                                    <div class="tab-container">
                                        <div if:true={NewLoanApplicantBorrowerType}>
                                            <lightning-input type="checkbox" label="Copy From Main Borrower"
                                                name="copyBorrowerAddress"
                                                onchange={getBorrowerAddress}></lightning-input>
                                        </div>

                                        <lightning-input-address onchange={handelLoanApplicantAddress}
                                            address-label="Present Address" street-label="Street" city-label="City"
                                            country-label="Country" province-label="State or Province"
                                            postal-code-label="PostalCode" street={LoanApplicantAddress.ResidenceStreet}
                                            city={LoanApplicantAddress.ResidenceCity}
                                            country={LoanApplicantAddress.ResidenceCountry}
                                            province={LoanApplicantAddress.ResidenceState}
                                            postal-code={LoanApplicantAddress.ResidencePostalCode}></lightning-input-address>

                                        <lightning-input class="AddressInfo" data-field-api-name="ResidenceYearCount"
                                            label="Years at current residence" type="number"
                                            value={LoanApplicantAddress.ResidenceYearCount}>
                                        </lightning-input>
                                        <lightning-input class="AddressInfo"
                                            data-field-api-name="ResidenceAdditionalMonthCount"
                                            label="Months at current residence" type="number"
                                            value={LoanApplicantAddress.ResidenceAdditionalMonthCount}>
                                        </lightning-input>

                                        <lightning-input type="checkbox" label="Same as above" name="copyMailingAddress"
                                            onchange={copyAddress}></lightning-input>

                                        <lightning-input-address address-label="Mailing Address" street-label="Street"
                                            city-label="City" country-label="Country" province-label="State or Province"
                                            postal-code-label="PostalCode"
                                            street={LoanApplicantMalingAddress.ResidenceStreet}
                                            city={LoanApplicantMalingAddress.ResidenceCity}
                                            country={LoanApplicantMalingAddress.ResidenceCountry}
                                            province={LoanApplicantMalingAddress.ResidenceState}
                                            postal-code={LoanApplicantMalingAddress.ResidencePostalCode}
                                            onchange={handelLoanApplicantMalingAddress}></lightning-input-address>

                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" label="Save and Next" title="Next"
                                                value="AddressInfo" onclick={saveApplicantAddress}></lightning-button>
                                        </div>
                                    </div>

                                </lightning-tab>
                                <lightning-tab label="Employment Information" value="4">

                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Employment Information
                                    </div>
                                    <div class="tab-container">
                                        <lightning-input type="checkbox" label="Self Employed" name="IsSelfEmployed"
                                            onchange={setSelfEmployment}
                                            checked={LoanApplicantEmployment.IsSelfEmployed}></lightning-input>

                                        <lightning-input class="employmentInfo" data-field-api-name="EmployerName"
                                            type="text" label="Employer Name"
                                            value={LoanApplicantEmployment.EmployerName}></lightning-input>

                                        <lightning-input class="employmentInfo" type="tel"
                                            data-field-api-name="Business_Phone__c" label="Business Phone"
                                            value={LoanApplicantEmployment.Business_Phone__c}></lightning-input>

                                        <lightning-input-address onchange={handelEmploymentAddress}
                                            data-field-api-name={LoanApplicantAddress} address-label="Employer Address"
                                            street-label="Street" city-label="City" country-label="Country"
                                            province-label="State or Province" postal-code-label="PostalCode"
                                            street={LoanApplicantEmployment.EmployerStreet}
                                            city={LoanApplicantEmployment.EmployerCity}
                                            country={LoanApplicantEmployment.EmployerCountry}
                                            province={LoanApplicantEmployment.EmployerState}
                                            postal-code={LoanApplicantEmployment.EmployerPostalCode}></lightning-input-address>

                                        <lightning-input data-field-api-name="CurrentJobYearCount"
                                            class="employmentInfo" label="Years on job" type="number"
                                            value={LoanApplicantEmployment.CurrentJobYearCount}></lightning-input>
                                        <lightning-input data-field-api-name="CurrentJobAdditionalMonthCount"
                                            class="employmentInfo" label="Months on job" type="number"
                                            value={LoanApplicantEmployment.CurrentJobAdditionalMonthCount}>
                                        </lightning-input>
                                        <lightning-input class="employmentInfo"
                                            data-field-api-name="Years_in_Industry__c" label="Years in Industry"
                                            type="number" value={LoanApplicantEmployment.Years_in_Industry__c}>
                                        </lightning-input>
                                        <lightning-input class="employmentInfo" data-field-api-name="JobTitle"
                                            label="Position/Title/Business" type="text"
                                            value={LoanApplicantEmployment.JobTitle}>
                                        </lightning-input>

                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" label="Save and Next" title="Next"
                                                onclick={saveApplicantEmployment}></lightning-button>
                                        </div>
                                    </div>

                                </lightning-tab>
                                <lightning-tab label="Income Information" value="5">

                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Monthly Income Information
                                    </div>
                                    <div class="tab-container">
                                        <lightning-input class="IncomeInfo" data-field-api-name="Base_Monthly_Salary__c"
                                            label="Monthly Base Salary" type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Base_Monthly_Salary__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>
                                        <lightning-input class="IncomeInfo"
                                            data-field-api-name="Monthly_Overtime_Amount__c" label="Monthly Overtime"
                                            type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Monthly_Overtime_Amount__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>
                                        <lightning-input class="IncomeInfo"
                                            data-field-api-name="Monthly_Bonus_Amount__c" label="Monthly Bonus"
                                            type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Monthly_Bonus_Amount__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>
                                        <lightning-input class="IncomeInfo"
                                            data-field-api-name="Monthly_Commission_Amount__c" label="Monthly Comission"
                                            type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Monthly_Commission_Amount__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>
                                        <lightning-input class="IncomeInfo" data-field-api-name="Devidends_Interest__c"
                                            label="Monthly Dividends/Interest" type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Devidends_Interest__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>
                                        <lightning-input class="IncomeInfo" data-field-api-name="Net_rental_Income__c"
                                            label="Monthly Net Rental Income" type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Net_rental_Income__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>
                                        <lightning-input class="IncomeInfo" data-field-api-name="Other_Income__c"
                                            label="Monthly Other Income" type="number" formatter="currency"
                                            value={LoanApplicantIncomes.Other_Income__c}
                                            onchange={calculateTotalIncome}>
                                        </lightning-input>

                                        <lightning-input name="IncomeInfo" data-field-api-name="MonthlyIncomeAmount"
                                            value={LoanApplicantIncomes.MonthlyIncomeAmount} type="number"
                                            formatter="currency" label="Monthly Income Amount"
                                            readonly="true"></lightning-input>

                                        <div class="slds-align_absolute-center button-pannel" style="height:5rem;">
                                            <lightning-button variant="brand" label="Save and Next" title="Next"
                                                value="IncomeInfo" onclick={saveApplicantIncomes}></lightning-button>
                                        </div>
                                    </div>

                                </lightning-tab>
                                <lightning-tab label="Debt/Expense Information" value="6">

                                    <div class="slds-text-color_weak slds-text-align_center 
                                                slds-text-heading_small">
                                        Monthly Debt/Expense Information <br />
                                        <span class="noteText">*(Note: List all Joint Expenses under the Main Borrower
                                            only,
                                            if there are any CoBorrowers)</span><br />
                                        <span class="noteText" style="font-size: 11px;">** Only list Expense Types that
                                            are
                                            considered Debt, where the debt is borrowed (Loans) or lines of credit
                                            (Credit
                                            Cards/Lines of Credit), and Expenses that are court ordered/mandatory like
                                            child
                                            support/alimony. Do not include living expenses like utilities, water,
                                            phone,
                                            cable, etc.</span>
                                    </div>
                                    <div class="tab-container">
                                        <lightning-input class="ExpenseInfo"
                                            label="Outstanding Loans (Average Monthly Payment Amount)" type="number"
                                            formatter="currency" data-field-api-name="Outstanding_Loans_Expenses__c"
                                            value={NewLoanApplicant.Outstanding_Loans_Expenses__c}
                                            onchange={calculateTotalExpenses}>
                                        </lightning-input>
                                        <lightning-input class="ExpenseInfo"
                                            label="Credit Cards (Average Monthly Payment Amount)" type="number"
                                            formatter="currency" data-field-api-name="Credit_Cards_Expenses__c"
                                            value={NewLoanApplicant.Credit_Cards_Expenses__c}
                                            onchange={calculateTotalExpenses}>
                                        </lightning-input>
                                        <lightning-input class="ExpenseInfo"
                                            label="Lines of Credit (Average Monthly Payment Amount)" type="number"
                                            formatter="currency" data-field-api-name="Lines_of_Credit_Expenses__c"
                                            value={NewLoanApplicant.Lines_of_Credit_Expenses__c}
                                            onchange={calculateTotalExpenses}>
                                        </lightning-input>
                                        <lightning-input class="ExpenseInfo"
                                            label="Alimony (Average Monthly Payment Amount)" type="number"
                                            formatter="currency" value={NewLoanApplicant.Alimony_Expenses__c}
                                            data-field-api-name="Alimony_Expenses__c" onchange={calculateTotalExpenses}>
                                        </lightning-input>
                                        <lightning-input class="ExpenseInfo"
                                            label="Child Support (Average Monthly Payment Amount)" type="number"
                                            formatter="currency" data-field-api-name="Child_Support_Expenses__c"
                                            value={NewLoanApplicant.Child_Support_Expenses__c}
                                            onchange={calculateTotalExpenses}>
                                        </lightning-input>
                                        <lightning-input class="ExpenseInfo"
                                            label="Other Expenses (Average Monthly Payment Amount)" type="number"
                                            formatter="currency" data-field-api-name="Other_Expenses__c"
                                            value={NewLoanApplicant.Other_Expenses__c}
                                            onchange={calculateTotalExpenses}>
                                        </lightning-input>

                                        <lightning-input name="MonthlyExpenseAmount"
                                            value={NewLoanApplicant.Monthly_Expenses_Amount__c} type="number"
                                            formatter="currency" data-field-api-name="Monthly_Expenses_Amount__c"
                                            label="Monthly Expenses Amount" read-only="true"></lightning-input>

                                        <div class="slds-align_absolute-center  button-pannel">
                                            <div class="slds-align_absolute-center  button-pannel" style="height:5rem;">
                                                <lightning-button class="slds-var-m-right_small" variant="brand"
                                                    data-action="AddCoBorrower" label="Add Co-Borrower"
                                                    title="AddCoBorrower" value="ExpenseInfo"
                                                    onclick={saveApplicantExpense}></lightning-button>

                                                <lightning-button variant="brand" data-action="PreAppSubmit"
                                                    label="Submit PreApp" title="PreAppSubmit" value="ExpenseInfo"
                                                    onclick={saveApplicantExpense}></lightning-button>
                                            </div>
                                        </div>
                                    </div>
                                </lightning-tab>
                            </lightning-tabset>
                        </div>
                    </div>
                </section>
            </div>

            <div if:true={isShowCertificationForm}>
                <section style="background: rgba(0,0,0,0.5);" role="dialog"
                    class="slds-modal slds-fade-in-open slds-modal_medium" aria-labelledby="modal-heading-01"
                    aria-modal="true" aria-describedby="modal-content-id-1">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header">
                            <lightning-button-icon class="slds-button slds-button_icon slds-modal__close"
                                icon-name="utility:close" alternative-text="close!"
                                onclick={hideCertificationForm}></lightning-button-icon>
                            <h2 class="slds-modal__title slds-hyphenate">Certifications And Authorizations</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium">

                            <lightning-formatted-rich-text
                                value={MortgageLoanProgram.Certification_Description__c}></lightning-formatted-rich-text>
                            <br />
                            <div class="slds-grid">
                                <lightning-input class="certificationqes" data-field-api-name="I_Accept__c"
                                    data-checkbox="true" type="checkbox" label="I accept"
                                    checked={ApplicationQuestion.I_Accept__c} name="Iaccept"></lightning-input>
                            </div>
                            <br />
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">

                                    <lightning-input type="text" label="Name" value={applicationQuestion}
                                        class="certificationqes"
                                        data-field-api-name="Name_On_Certification__c"></lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="certificationqes" data-field-api-name="BirthDate__c"
                                        type="date" value={ApplicationQuestion.BirthDate__c} label="Date of Birth">
                                    </lightning-input>
                                </div>
                            </div>
                        </div>
                        <footer class="slds-modal__footer">
                            <lightning-button variant="neutral" label="Cancel" title="Cancel"
                                onclick={hideCertificationForm}></lightning-button>
                            <lightning-button variant="brand" label="Save" title="Save"
                                onclick={saveCertificationForm}></lightning-button>
                        </footer>
                    </div>
                </section>
            </div>

            <div if:true={showLiabilitiesForm}>
                <section style="background: rgba(0,0,0,0.5);" role="dialog" tabindex="-1"
                    class="slds-modal slds-fade-in-open slds-modal_medium" aria-labelledby="modal-heading-01"
                    aria-modal="true" aria-describedby="modal-content-id-1">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header">
                            <button class="slds-button slds-button_icon slds-modal__close" title="Close"
                                onclick={hideLiabilitiesForm}>
                                <lightning-icon icon-name="utility:close" alternative-text="close!"
                                    title="close"></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>
                            <h2 class="slds-modal__title slds-hyphenate">Liabilities Information</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium">

                            <lightning-radio-group class="LiabilityForm" name="Loan Applicant"
                                data-field-api-name="Loan_Applicant__c" label="Loan Applicant"
                                options={LoanApplicantMap} onchange={handelLiabilitiesLoanApplicant}
                                value={NewLiability.Loan_Applicant__c} type="radio" required="true">
                            </lightning-radio-group>

                            <lightning-input data-field-api-name="Name" class="LiabilityForm" type="text" label="Name"
                                value={NewLiability.Name}></lightning-input>

                            <lightning-combobox class="LiabilityForm" data-field-api-name="LiabilityClass"
                                name="Liability Class" label="Liability Class" value={NewLiability.LiabilityClass}
                                options={AssetOrLiabilityClasses}></lightning-combobox>

                            <lightning-combobox class="LiabilityForm" data-field-api-name="AccountType"
                                name="Account Type" label="Account Type" value={NewLiability.AccountType}
                                options={AccountTypes}></lightning-combobox>

                            <lightning-combobox class="LiabilityForm" data-field-api-name="OtherLiabilityType"
                                name="Other Liability / Expense Type" label="Other Liability / Expense Type"
                                value={NewLiability.OtherLiabilityType}
                                options={AssetOrLiabilityTypes}></lightning-combobox>

                            <lightning-input class="LiabilityForm" data-field-api-name="CreditorName" type="text"
                                label="Creditor Name" value={NewLiability.CreditorName}></lightning-input>

                            <lightning-input class="LiabilityForm" data-field-api-name="AccountNumber" type="text"
                                label="Account Number" value={NewLiability.AccountNumber}></lightning-input>

                            <lightning-input class="LiabilityForm" data-field-api-name="MonthlyPaymentAmount"
                                label="Monthly Payment" type="number" formatter="currency"
                                value={NewLiability.MonthlyPaymentAmount}>
                            </lightning-input>

                            <lightning-input class="LiabilityForm" data-field-api-name="UnpaidBalanceAmount"
                                label="Unpaid Balance" type="number" formatter="currency"
                                value={NewLiability.UnpaidBalanceAmount}>
                            </lightning-input>

                            <lightning-input class="LiabilityForm" data-field-api-name="ShouldBePaidInFull"
                                type="checkbox" checked={NewLiability.ShouldBePaidInFull} data-checkbox="true"
                                label="Paid in Full" name="Paid in Full" value={NewLiability.ShouldBePaidInFull}>
                            </lightning-input>
                        </div>
                        <footer class="slds-modal__footer">
                            <lightning-button variant="neutral" label="Cancel" title="Cancel"
                                onclick={hideLiabilitiesForm}></lightning-button>
                            <lightning-button variant="brand" label="Save" title="Save"
                                onclick={saveLiabilitiesForm}></lightning-button>

                        </footer>
                    </div>
                </section>
            </div>

            <div if:true={showAssetsForm}>
                <section style="background: rgba(0,0,0,0.5);" role="dialog" tabindex="-1"
                    class="slds-modal slds-fade-in-open slds-modal_medium" aria-labelledby="modal-heading-01"
                    aria-modal="true" aria-describedby="modal-content-id-1">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header">
                            <button class="slds-button slds-button_icon slds-modal__close" title="Close"
                                onclick={hideAssetsForm}>
                                <lightning-icon icon-name="utility:close" alternative-text="close!"
                                    title="close"></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>
                            <h2 class="slds-modal__title slds-hyphenate">Assets Information</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium">

                            <lightning-radio-group name="Loan Applicant" label="Loan Applicant"
                                options={LoanApplicantMap} value={NewAsset.Loan_Applicant__c} required="true"
                                type="radio" onchange={handelAssetLoanApplicant}
                                style="display:inline-block !important;">
                            </lightning-radio-group>

                            <lightning-input data-field-api-name="Name" class="AssetForm" type="text" label="Name"
                                value={NewAsset.Name}></lightning-input>

                            <lightning-combobox class="AssetForm" data-field-api-name="AssetClass" name="select"
                                label="Asset Class" value={NewAsset.AssetClass}
                                options={AssetOrLiabilityClasses}></lightning-combobox>


                            <lightning-combobox class="AssetForm" data-field-api-name="AssetType" name="select"
                                label="Asset Type" value={NewAsset.AssetType}
                                options={AssetOrLiabilityTypes}></lightning-combobox>

                            <lightning-combobox class="AssetForm" data-field-api-name="AccountType" name="select"
                                label="Account Type" value={NewAsset.AccountType}
                                options={AccountTypes}></lightning-combobox>

                            <lightning-input class="AssetForm" type="text"
                                data-field-api-name="FinancialInstitutionName" label="Financial Institution"
                                value={NewAsset.FinancialInstitutionName}></lightning-input>

                            <lightning-input class="AssetForm" data-field-api-name="AccountNumber" type="text"
                                label="Financial Account Number" value={NewAsset.AccountNumber}></lightning-input>

                            <lightning-input class="AssetForm" data-field-api-name="CashOrMarketValue"
                                label="Cash / Market Value" type="number" formatter="currency"
                                value={NewAsset.CashOrMarketValue}>
                            </lightning-input>
                        </div>
                        <footer class="slds-modal__footer">
                            <lightning-button variant="neutral" label="Cancel" title="Cancel"
                                onclick={hideAssetsForm}></lightning-button>
                            <lightning-button variant="brand" label="Save" title="Save"
                                onclick={saveAssetForm}></lightning-button>
                        </footer>
                    </div>
                </section>
            </div>
        </div>
    </div>

</template>